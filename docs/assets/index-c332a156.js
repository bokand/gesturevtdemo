var ht=Object.defineProperty;var yt=(t,e,n)=>e in t?ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a=(t,e,n)=>(yt(t,typeof e!="symbol"?e+"":e,n),n),J=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var u=(t,e,n)=>(J(t,e,"read from private field"),n?n.call(t):e.get(t)),O=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},I=(t,e,n,i)=>(J(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();class Et{constructor(e){a(this,"animationStartTime",0);a(this,"animationStartOffset",0);a(this,"networkDelay");a(this,"maxOffset");a(this,"offset",0);a(this,"parallax");a(this,"limitFingerDrag");a(this,"boostVelocity");this.networkDelay=e.networkDelay,this.maxOffset=e.targetOffset,this.parallax=e.parallax,this.limitFingerDrag=e.limitFingerDrag,this.boostVelocity=e.boostVelocity}startAnimating(e){this.animationStartTime=e,this.animationStartOffset=this.offset}pointerUp(e){return"success"}committed(){return performance.now()-this.animationStartTime>=this.networkDelay}}function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nt={exports:{}};(function(t){(function(){t.exports=e;function e(n,i,s,o){typeof s=="object"&&(o=s,s=!1),typeof o>"u"&&(o={});for(var l=0,m=0,y=0,p=0,c=n.length,f=0;f<c;++f)l+=n[f],m+=i[f],y+=n[f]*i[f],p+=n[f]*n[f];if(o.m=(y-l*m/c)/(p-l*l/c),o.b=m/c-o.m*l/c,s){for(var z=0,E=0;E<c;++E)z+=(i[E]-o.b-o.m*n[E])*(i[E]-o.b-o.m*n[E]);var G=c*p-l*l,K=1/(c-2)*z;o.bErr=Math.sqrt(K/G*p),o.mErr=Math.sqrt(c/G*K)}return function(gt){return o.m*gt+o.b}}})()})(nt);var bt=nt.exports;const Dt=vt(bt);function r(){throw new Error("missing element")}function st(t){let e={m:0};const n=t.map(s=>s.offset),i=t.map(s=>s.time);return Dt(i,n,!1,e),e.m,e.m}const Q=10,Pt=10;class N{constructor(e){a(this,"mass",1);a(this,"initialVelocity",0);a(this,"dampingRatio");a(this,"undampedNaturalFrequency");a(this,"dampedNaturalFrequency");a(this,"lastNFrames");a(this,"name");a(this,"overshootCurve",e=>e);const n=(2*Math.PI/e.frequencyResponse)**2*this.mass;this.undampedNaturalFrequency=Math.sqrt(n/this.mass),this.dampedNaturalFrequency=this.undampedNaturalFrequency*Math.sqrt(Math.abs(1-e.dampingRatio**2)),this.dampingRatio=e.dampingRatio,this.lastNFrames=[],this.name=e.name,e.overshootCurve&&(this.overshootCurve=e.overshootCurve)}position(e,n){const i=this.undampedNaturalFrequency*this.dampingRatio,s=this.dampedNaturalFrequency,o=(this.initialVelocity+i*e)/s,l=e;let m=Math.exp(-i*n)*(o*Math.sin(s*n)+l*Math.cos(s*n));if(m<0&&(m=this.overshootCurve(m)),isNaN(m)||!isFinite(m))throw"Spring config invalid. Position: "+m;this.lastNFrames.push({offset:m,time:n});let y=!1;if(this.lastNFrames.length>Q){this.lastNFrames.shift();let p=0;for(let c of this.lastNFrames)p+=c.offset*c.offset;y=p<Pt*Q}return m<1&&(y=!0),{offset:m,done:y}}velocity(){return st(this.lastNFrames)}}var D,g,P;class wt extends Et{constructor(n){super(n);O(this,D,void 0);O(this,g,void 0);O(this,P,void 0);a(this,"lastRaf",null);a(this,"hasCommitted",!1);a(this,"hasAborted",!1);a(this,"pointerHistory",[]);a(this,"spring80FrequencyResponseInput",document.getElementById("spring80FrequencyResponse")??r());a(this,"spring80FrequencyResponseDisplay",document.getElementById("spring80FrequencyResponseDisplay")??r());a(this,"spring80DampingRatioInput",document.getElementById("spring80DampingRatio")??r());a(this,"spring80DampingRatioDisplay",document.getElementById("spring80DampingRatioDisplay")??r());a(this,"spring80FrequencyResponse",parseFloat(this.spring80FrequencyResponseInput.value));a(this,"spring80DampingRatio",parseFloat(this.spring80DampingRatioInput.value));this.animationStartOffset=0,this.spring80FrequencyResponseInput.addEventListener("input",()=>this.updateDisplays()),this.spring80DampingRatioInput.addEventListener("input",()=>this.updateDisplays()),I(this,D,new N({frequencyResponse:200,dampingRatio:.95,name:"100%"})),I(this,g,new N({frequencyResponse:this.spring80FrequencyResponse,dampingRatio:this.spring80DampingRatio,name:"80%"})),I(this,P,new N({frequencyResponse:200,dampingRatio:.9,name:"0%"}))}updateDisplays(){this.spring80FrequencyResponseDisplay.innerHTML=this.spring80FrequencyResponseInput.value,this.spring80DampingRatioDisplay.innerHTML=this.spring80DampingRatioInput.value}advance(n){n=n,!this.hasCommitted&&this.committed()&&(this.startAnimating(this.lastRaf||n),this.hasCommitted=!0,u(this,D).initialVelocity=u(this,g).velocity());const i=n-this.animationStartTime;let s=null;return this.hasAborted?(s=u(this,P).position(this.animationStartOffset,i),this.offset=Math.max(s.offset,0)):this.hasCommitted?(s=u(this,D).position(this.maxOffset-this.animationStartOffset,i),this.offset=this.maxOffset-s.offset):(s=u(this,g).position(this.maxOffset*.8-this.animationStartOffset,i),this.offset=this.maxOffset*.8-s.offset),this.lastRaf=n,{done:s.done&&(this.hasCommitted||this.hasAborted),fgOffset:this.offset,bgOffset:this.fgToBgOffset(this.offset),hasCommitted:this.hasCommitted}}pointerMove(n){return this.offset=this.fingerDragAdd(this.offset,n.movementX),this.pointerHistory.push({offset:this.offset,time:n.timeStamp}),this.pointerHistory.length>10&&this.pointerHistory.shift(),this.offset<0&&(this.offset=0),{done:!1,fgOffset:this.offset,bgOffset:this.fgToBgOffset(this.offset),hasCommitted:!1}}fingerDragAdd(n,i){return this.limitFingerDrag?n+.8*i:n+i}fgToBgOffset(n){return this.parallax?.25*(n-this.maxOffset):0}pointerUp(n){let i=st(this.pointerHistory);return this.boostVelocity&&(i*=4,i=Math.max(i,1)),i=Math.min(i,2),(this.offset+i*100)/this.maxOffset<.3?(this.hasAborted=!0,u(this,P).initialVelocity=-i,"abort"):(u(this,g).initialVelocity=-i,"success")}}D=new WeakMap,g=new WeakMap,P=new WeakMap;let S,W,M=!1,L=!1,w=!1,T=!1,q=!1,_=!1;const it=document.getElementById("scrim")??r(),$=document.getElementById("progress")??r(),Y=document.getElementById("progressContainer")??r(),x=document.getElementById("progress_bar")??r(),R=document.getElementById("networkDelayInput")??r(),Rt=document.getElementById("networkDelayDisplay")??r(),ot=document.getElementById("networkDelayLoadInput")??r(),Ot=document.getElementById("networkDelayLoadDisplay")??r(),It=document.getElementById("zoomDisplay")??r(),Ft=document.getElementById("settingLoadProgressBar")??r(),Bt=document.getElementById("settingParallax")??r(),St=document.getElementById("settingLimitFingerDrag")??r(),V=document.getElementById("settingZoom")??r(),Lt=document.getElementById("settingBackground")??r(),at=document.getElementById("settingProgressAttribution")??r(),qt=document.getElementById("settingUnloadHandler")??r(),xt=document.getElementById("settingBoostVelocity")??r();let rt="lightblue",d=0,j=0,A=0,At=["P25","P50","P75","P90","P95","P99"],k=[30,100,330,660,1e3,2360],b=1,C=1,v=100,H=100;function kt(){H=v,v=(v*185852+1)%34359738337;const t=v/34359738337;return console.log(t),"hsl("+360*t+", 50%, 50%)"}function Mt(){return Lt.checked?"white":kt()}function lt(){let t=k[parseInt(R.value)],e=k[parseInt(ot.value)];return Math.max(t,e)}function Ct(t){var e;((e=t.target)==null?void 0:e.id)!=""||M||(L=!0,h=Z(),W=document.startViewTransition(),W.ready.then(()=>{rt=document.documentElement.style.getPropertyValue("--main-background-color"),document.documentElement.style.setProperty("--main-background-color",Mt()),S=document.documentElement.animate({},{duration:0,pseudoElement:"::view-transition-new(root)"}),S.pause(),it.style.display="block"}))}function mt(t){return .3+(1-t/document.documentElement.getBoundingClientRect().width)*.5}let F=!1;function Nt(t){if(!L)return;let e=h.pointerMove(t);document.documentElement.style.setProperty("--fg-offset",`${e.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${e.bgOffset}px`),document.documentElement.style.setProperty("--scrim",`${mt(e.fgOffset)}`),ct(e.fgOffset),Tt(e.fgOffset)}function ct(t){let e=t/document.documentElement.getBoundingClientRect().width,n=1-(1-C)*e;document.documentElement.style.setProperty("--fg-scale",`${n}`)}function Tt(t){if(t/document.documentElement.getBoundingClientRect().width>.5){if(!F){let n=document.documentElement.animate([{"--bg-scale":C}],{duration:100,fill:"forwards"});n.finished.then(()=>{n.commitStyles(),n.cancel()}),F=!0}}else if(F){let n=document.documentElement.animate([{"--bg-scale":b}],{duration:100,fill:"forwards"});n.finished.then(()=>{n.commitStyles(),n.cancel()}),F=!1}}function Vt(t){if(!L)return;if(L=!1,T=!1,h.pointerUp(t)=="abort")X(),w=!0,v=H;else if(qt.checked){let n=document.documentElement.style.getPropertyValue("--fg-offset"),i=document.documentElement.style.getPropertyValue("--fg-scale"),s=document.documentElement.getBoundingClientRect().width*10/100,o=document.documentElement.animate([{"--fg-scale":1,"--fg-offset":s+"px"}],{duration:300,fill:"forwards"});o.finished.then(()=>{if(o.commitStyles(),o.cancel(),window.confirm("are you sure you want to leave this page?  It's very nice.")){let l=document.documentElement.animate([{"--fg-scale":i,"--fg-offset":n}],{duration:200,fill:"forwards"});l.finished.then(()=>{l.commitStyles(),l.cancel(),X(),w=!0,v=H,et().then(tt)})}});return}et().then(tt)}function Ht(){let t=document.documentElement.animate([{"--fg-scale":C,"--bg-scale":1}],{duration:100,fill:"forwards"});t.finished.then(()=>{t.commitStyles(),t.cancel()})}function X(){let t=document.documentElement.animate([{"--fg-scale":1,"--bg-scale":b}],{duration:100,fill:"forwards"});t.finished.then(()=>{t.commitStyles(),t.cancel()})}function tt(){_=!0,document.documentElement.animate([{"--scrim":0}],{duration:100}).finished.then(dt),q=!!Ft.checked&&!w,q?ft():U()}function ft(){let t=performance.now();if(t>=A){U();return}$.style.display="block",x.max=A-d,x.value=t-d,requestAnimationFrame(ft)}let h=Z();pt();function ut(t,e){const n=h.advance(t);document.documentElement.style.setProperty("--fg-offset",`${n.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${n.bgOffset}px`),document.documentElement.style.setProperty("--scrim",`${mt(n.fgOffset)}`),ct(n.fgOffset),t-d>800&&($.style.display="block"),n.hasCommitted&&!T&&(Ht(),T=!0),n.done?e():requestAnimationFrame(i=>{ut(i,e)})}function et(){return M=!0,d=performance.now(),j=d+parseFloat(R.value),A=d+lt(),console.log("start : "+d+" commit : "+j+" load : "+A),h.startAnimating(d),new Promise(t=>{ut(performance.now(),t)})}function dt(){_=!1,document.documentElement.style.setProperty("--fg-offset","0px"),document.documentElement.style.setProperty("--vertical-offset","0px"),document.documentElement.style.setProperty("--scrim","0.0"),document.documentElement.style.setProperty("--bg-scale",b.toString()),document.documentElement.style.setProperty("--fg-scale","1.0"),w&&(document.documentElement.style.setProperty("--main-background-color",rt),w=!1),S&&S.play(),it.style.display="none",q||(M=!1)}function U(){q=!1,$.style.display="none",x.removeAttribute("value"),x.removeAttribute("max"),_||(M=!1)}function pt(){dt(),U()}function Z(){return new wt({networkDelay:k[parseInt(R.value)],targetOffset:document.documentElement.getBoundingClientRect().width,parallax:!!Bt.checked,limitFingerDrag:!!St.checked,boostVelocity:!!xt.checked})}function B(){let t=parseInt(R.value);Rt.innerHTML=At[t]+"="+k[t].toString(),Ot.innerHTML=lt().toString(),b=parseInt(V.value)/100,C=b+(1-b)/3,It.innerHTML=V.value.toString(),h.updateDisplays(),h=Z(),pt()}function _t(){at.checked?Y.classList.add("attributed"):Y.classList.remove("attributed")}function $t(){R.addEventListener("input",B),ot.addEventListener("input",B),V.addEventListener("input",B),at.addEventListener("change",_t),B(),window.addEventListener("pointerdown",Ct),window.addEventListener("pointerup",Vt),window.addEventListener("pointermove",Nt)}onload=$t;
