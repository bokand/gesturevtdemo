var ut=Object.defineProperty;var dt=(e,n,t)=>n in e?ut(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var a=(e,n,t)=>(dt(e,typeof n!="symbol"?n+"":n,t),t),K=(e,n,t)=>{if(!n.has(e))throw TypeError("Cannot "+t)};var f=(e,n,t)=>(K(e,n,"read from private field"),t?t.call(e):n.get(e)),R=(e,n,t)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,t)},O=(e,n,t,i)=>(K(e,n,"write to private field"),i?i.call(e,t):n.set(e,t),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();class pt{constructor(n){a(this,"animationStartTime",0);a(this,"animationStartOffset",0);a(this,"networkDelay");a(this,"maxOffset");a(this,"offset",0);a(this,"parallax");a(this,"limitFingerDrag");this.networkDelay=n.networkDelay,this.maxOffset=n.targetOffset,this.parallax=n.parallax,this.limitFingerDrag=n.limitFingerDrag}startAnimating(n){this.animationStartTime=n,this.animationStartOffset=this.offset}pointerUp(n){return"success"}committed(){return performance.now()-this.animationStartTime>=this.networkDelay}}function gt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j={exports:{}};(function(e){(function(){e.exports=n;function n(t,i,s,o){typeof s=="object"&&(o=s,s=!1),typeof o>"u"&&(o={});for(var l=0,c=0,y=0,g=0,m=t.length,u=0;u<m;++u)l+=t[u],c+=i[u],y+=t[u]*i[u],g+=t[u]*t[u];if(o.m=(y-l*c/m)/(g-l*l/m),o.b=c/m-o.m*l/m,s){for(var Z=0,E=0;E<m;++E)Z+=(i[E]-o.b-o.m*t[E])*(i[E]-o.b-o.m*t[E]);var z=m*g-l*l,G=1/(m-2)*Z;o.bErr=Math.sqrt(G/z*g),o.mErr=Math.sqrt(m/z*G)}return function(ft){return o.m*ft+o.b}}})()})(j);var ht=j.exports;const yt=gt(ht);function r(){throw new Error("missing element")}function X(e){let n={m:0};const t=e.map(s=>s.offset),i=e.map(s=>s.time);return yt(i,t,!1,n),n.m,n.m}const J=10,Et=10;class C{constructor(n){a(this,"mass",1);a(this,"initialVelocity",0);a(this,"dampingRatio");a(this,"undampedNaturalFrequency");a(this,"dampedNaturalFrequency");a(this,"lastNFrames");a(this,"name");const t=(2*Math.PI/n.frequencyResponse)**2*this.mass;this.undampedNaturalFrequency=Math.sqrt(t/this.mass),this.dampedNaturalFrequency=this.undampedNaturalFrequency*Math.sqrt(Math.abs(1-n.dampingRatio**2)),this.dampingRatio=n.dampingRatio,this.lastNFrames=[],this.name=n.name}position(n,t){const i=this.undampedNaturalFrequency*this.dampingRatio,s=this.dampedNaturalFrequency,o=(this.initialVelocity+i*n)/s,l=n,c=Math.exp(-i*t)*(o*Math.sin(s*t)+l*Math.cos(s*t));if(isNaN(c)||!isFinite(c))throw"Spring config invalid. Position: "+c;this.lastNFrames.push({offset:c,time:t});let y=!1;if(this.lastNFrames.length>J){this.lastNFrames.shift();let g=0;for(let m of this.lastNFrames)g+=m.offset*m.offset;y=g<Et*J}return c<1&&(y=!0),{offset:c,done:y}}velocity(){return X(this.lastNFrames)}}var v,p,b;class Dt extends pt{constructor(t){super(t);R(this,v,void 0);R(this,p,void 0);R(this,b,void 0);a(this,"lastRaf",null);a(this,"hasCommitted",!1);a(this,"hasAborted",!1);a(this,"pointerHistory",[]);a(this,"spring80FrequencyResponseInput",document.getElementById("spring80FrequencyResponse")??r());a(this,"spring80FrequencyResponseDisplay",document.getElementById("spring80FrequencyResponseDisplay")??r());a(this,"spring80DampingRatioInput",document.getElementById("spring80DampingRatio")??r());a(this,"spring80DampingRatioDisplay",document.getElementById("spring80DampingRatioDisplay")??r());a(this,"spring80FrequencyResponse",parseFloat(this.spring80FrequencyResponseInput.value));a(this,"spring80DampingRatio",parseFloat(this.spring80DampingRatioInput.value));this.animationStartOffset=0,this.spring80FrequencyResponseInput.addEventListener("input",()=>this.updateDisplays()),this.spring80DampingRatioInput.addEventListener("input",()=>this.updateDisplays()),O(this,v,new C({frequencyResponse:200,dampingRatio:.95,name:"100%"})),O(this,p,new C({frequencyResponse:this.spring80FrequencyResponse,dampingRatio:this.spring80DampingRatio,name:"80%"})),console.log(f(this,p)),O(this,b,new C({frequencyResponse:200,dampingRatio:.9,name:"0%"}))}updateDisplays(){console.log(this.spring80FrequencyResponseInput.value),this.spring80FrequencyResponseDisplay.innerHTML=this.spring80FrequencyResponseInput.value,this.spring80DampingRatioDisplay.innerHTML=this.spring80DampingRatioInput.value}advance(t){t=t,!this.hasCommitted&&this.committed()&&(this.startAnimating(this.lastRaf||t),this.hasCommitted=!0,f(this,v).initialVelocity=f(this,p).velocity());const i=t-this.animationStartTime;let s=null;return this.hasAborted?(s=f(this,b).position(this.animationStartOffset,i),this.offset=Math.max(s.offset,0)):this.hasCommitted?(s=f(this,v).position(this.maxOffset-this.animationStartOffset,i),this.offset=this.maxOffset-s.offset):(s=f(this,p).position(this.maxOffset*.8-this.animationStartOffset,i),this.offset=this.maxOffset*.8-s.offset),this.lastRaf=t,{done:s.done&&(this.hasCommitted||this.hasAborted),fgOffset:this.offset,bgOffset:this.fgToBgOffset(this.offset),hasCommitted:this.hasCommitted}}pointerMove(t){return this.offset=this.fingerDragAdd(this.offset,t.movementX),this.pointerHistory.push({offset:this.offset,time:t.timeStamp}),this.pointerHistory.length>10&&this.pointerHistory.shift(),this.offset<0&&(this.offset=0),{done:!1,fgOffset:this.offset,bgOffset:this.fgToBgOffset(this.offset),hasCommitted:!1}}fingerDragAdd(t,i){return this.limitFingerDrag?t+.8*i:t+i}fgToBgOffset(t){return this.parallax?.25*(t-this.maxOffset):0}pointerUp(t){const i=-Math.max(-X(this.pointerHistory),-1.2);return console.log("offset",this.offset),console.log("velocity",i),(this.offset+i*100)/this.maxOffset<.3?(this.hasAborted=!0,f(this,b).initialVelocity=-i,"abort"):(f(this,p).initialVelocity=-i,"success")}}v=new WeakMap,p=new WeakMap,b=new WeakMap;let S,Q,k=!1,L=!1,q=!1,T=!1,B=!1,_=!1;const tt=document.getElementById("scrim")??r(),V=document.getElementById("progress")??r(),W=document.getElementById("progressContainer")??r(),x=document.getElementById("progress_bar")??r(),w=document.getElementById("networkDelayInput")??r(),vt=document.getElementById("networkDelayDisplay")??r(),et=document.getElementById("networkDelayLoadInput")??r(),bt=document.getElementById("networkDelayLoadDisplay")??r(),wt=document.getElementById("zoomDisplay")??r(),Rt=document.getElementById("settingLoadProgressBar")??r(),Ot=document.getElementById("settingParallax")??r(),Pt=document.getElementById("settingLimitFingerDrag")??r(),H=document.getElementById("settingZoom")??r(),It=document.getElementById("settingBackground")??r(),nt=document.getElementById("settingProgressAttribution")??r();let st="lightblue",d=0,Y=0,A=0,M=[50,100,300,600,1200,2500],D=1,N=1,F=100;function Ft(){F=F+1;const e=(F*185852+1)%34359738337/34359738337;return"#"+Math.floor(e*16777215).toString(16)}function St(){return It.checked?"white":Ft()}function it(){let e=M[parseInt(w.value)],n=M[parseInt(et.value)];return Math.max(e,n)}function Lt(e){var n;((n=e.target)==null?void 0:n.id)!=""||k||(L=!0,h=U(),Q=document.startViewTransition(),Q.ready.then(()=>{st=document.documentElement.style.getPropertyValue("--main-background-color"),document.documentElement.style.setProperty("--main-background-color",St()),S=document.documentElement.animate({},{duration:0,pseudoElement:"::view-transition-new(root)"}),S.pause(),tt.style.display="block"}))}function ot(e){return .3+(1-e/document.documentElement.getBoundingClientRect().width)*.5}let P=!1;function qt(e){if(!L)return;let n=h.pointerMove(e);document.documentElement.style.setProperty("--fg-offset",`${n.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${n.bgOffset}px`),document.documentElement.style.setProperty("--scrim",`${ot(n.fgOffset)}`),at(n.fgOffset),Bt(n.fgOffset)}function at(e){let n=e/document.documentElement.getBoundingClientRect().width,t=1-(1-N)*n;document.documentElement.style.setProperty("--fg-scale",`${t}`)}function Bt(e){if(e/document.documentElement.getBoundingClientRect().width>.5){if(!P){let t=document.documentElement.animate([{"--bg-scale":N}],{duration:100,fill:"forwards"});t.finished.then(()=>{t.commitStyles(),t.cancel()}),P=!0}}else if(P){let t=document.documentElement.animate([{"--bg-scale":D}],{duration:100,fill:"forwards"});t.finished.then(()=>{t.commitStyles(),t.cancel()}),P=!1}}function xt(e){if(!L)return;L=!1,T=!1,h.pointerUp(e)=="abort"&&(Mt(),q=!0,F--),Nt().then(kt)}function At(){let e=document.documentElement.animate([{"--fg-scale":N,"--bg-scale":1}],{duration:100,fill:"forwards"});e.finished.then(()=>{e.commitStyles(),e.cancel()})}function Mt(){let e=document.documentElement.animate([{"--fg-scale":1,"--bg-scale":D}],{duration:100,fill:"forwards"});e.finished.then(()=>{e.commitStyles(),e.cancel()})}function kt(){_=!0,document.documentElement.animate([{"--scrim":0}],{duration:100}).finished.then(mt),B=!!Rt.checked&&!q,B?rt():$()}function rt(){let e=performance.now();if(e>=A){$();return}V.style.display="block",x.max=A-d,x.value=e-d,requestAnimationFrame(rt)}let h=U();ct();function lt(e,n){const t=h.advance(e);document.documentElement.style.setProperty("--fg-offset",`${t.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${t.bgOffset}px`),document.documentElement.style.setProperty("--scrim",`${ot(t.fgOffset)}`),at(t.fgOffset),e-d>800&&(V.style.display="block"),t.hasCommitted&&!T&&(At(),T=!0),t.done?n():requestAnimationFrame(i=>{lt(i,n)})}function Nt(){return k=!0,d=performance.now(),Y=d+parseFloat(w.value),A=d+it(),console.log("start : "+d+" commit : "+Y+" load : "+A),h.startAnimating(d),new Promise(e=>{lt(performance.now(),e)})}function mt(){_=!1,document.documentElement.style.setProperty("--fg-offset","0px"),document.documentElement.style.setProperty("--vertical-offset","0px"),document.documentElement.style.setProperty("--scrim","0.0"),document.documentElement.style.setProperty("--bg-scale",D.toString()),document.documentElement.style.setProperty("--fg-scale","1.0"),q&&(document.documentElement.style.setProperty("--main-background-color",st),q=!1),S&&S.play(),tt.style.display="none",B||(k=!1)}function $(){B=!1,V.style.display="none",x.removeAttribute("value"),x.removeAttribute("max"),_||(k=!1)}function ct(){mt(),$()}function U(){return new Dt({networkDelay:M[parseInt(w.value)],targetOffset:document.documentElement.getBoundingClientRect().width,parallax:!!Ot.checked,limitFingerDrag:!!Pt.checked})}function I(){vt.innerHTML=M[parseInt(w.value)].toString(),bt.innerHTML=it().toString(),D=parseInt(H.value)/100,N=D+(1-D)/3,wt.innerHTML=H.value.toString(),h.updateDisplays(),h=U(),ct()}function Ct(){nt.checked?W.classList.add("attributed"):W.classList.remove("attributed")}function Tt(){w.addEventListener("input",I),et.addEventListener("input",I),H.addEventListener("input",I),nt.addEventListener("change",Ct),I(),window.addEventListener("pointerdown",Lt),window.addEventListener("pointerup",xt),window.addEventListener("pointermove",qt)}onload=Tt;
