var Ke=Object.defineProperty;var Je=(e,n,t)=>n in e?Ke(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var a=(e,n,t)=>(Je(e,typeof n!="symbol"?n+"":n,t),t),ve=(e,n,t)=>{if(!n.has(e))throw TypeError("Cannot "+t)};var u=(e,n,t)=>(ve(e,n,"read from private field"),t?t.call(e):n.get(e)),N=(e,n,t)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,t)},V=(e,n,t,s)=>(ve(e,n,"write to private field"),s?s.call(e,t):n.set(e,t),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();class Ye{constructor(n){a(this,"animationStartTime",0);a(this,"animationStartOffset",0);a(this,"networkDelay");a(this,"maxOffset");a(this,"offset",0);a(this,"parallax");a(this,"fingerDragCurve");a(this,"boostVelocity");a(this,"targetStopPercent");a(this,"loadStart",0);a(this,"snapping",!1);this.networkDelay=n.networkDelay,this.maxOffset=n.targetOffset,this.parallax=n.parallax,this.fingerDragCurve=n.fingerDragCurve,this.boostVelocity=n.boostVelocity,this.targetStopPercent=n.targetStopPercent}setSnapping(n){return this.snapping=n,n}startAnimating(n){this.loadStart=n,this.animationStartTime=n,this.animationStartOffset=this.offset}restartAnimating(n){this.animationStartTime=n,this.animationStartOffset=this.offset}pointerUp(){return"success"}committed(n){return n-this.loadStart>=this.networkDelay}}function je(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ke={exports:{}};(function(e){(function(){e.exports=n;function n(t,s,i,o){typeof i=="object"&&(o=i,i=!1),typeof o>"u"&&(o={});for(var l=0,c=0,d=0,f=0,m=t.length,g=0;g<m;++g)l+=t[g],c+=s[g],d+=t[g]*s[g],f+=t[g]*t[g];if(o.m=(d-l*c/m)/(f-l*l/m),o.b=c/m-o.m*l/m,i){for(var k=0,S=0;S<m;++S)k+=(s[S]-o.b-o.m*t[S])*(s[S]-o.b-o.m*t[S]);var T=m*f-l*l,ye=1/(m-2)*k;o.bErr=Math.sqrt(ye/T*f),o.mErr=Math.sqrt(m/T*ye)}return function(Qe){return o.m*Qe+o.b}}})()})(ke);var et=ke.exports;const tt=je(et);function r(){throw new Error("missing element")}function Re(e){let n={m:0};const t=e.map(i=>i.offset),s=e.map(i=>i.time);return tt(s,t,!1,n),n.m,n.m}const be=10,nt=10;class ee{constructor(n){a(this,"mass",1);a(this,"initialVelocity",0);a(this,"dampingRatio");a(this,"undampedNaturalFrequency");a(this,"dampedNaturalFrequency");a(this,"lastNFrames");a(this,"name");a(this,"overshootCurve",n=>n);a(this,"preserveMinOscillation",0);const t=(2*Math.PI/n.frequencyResponse)**2*this.mass;this.undampedNaturalFrequency=Math.sqrt(t/this.mass),this.dampedNaturalFrequency=this.undampedNaturalFrequency*Math.sqrt(Math.abs(1-n.dampingRatio**2)),this.dampingRatio=n.dampingRatio,this.lastNFrames=[],this.name=n.name,n.overshootCurve&&(this.overshootCurve=n.overshootCurve)}position(n,t){const s=this.undampedNaturalFrequency*this.dampingRatio,i=this.dampedNaturalFrequency,o=(this.initialVelocity+s*n)/i,l=n;let c=(this.preserveMinOscillation+Math.exp(-s*t))*(o*Math.sin(i*t)+l*Math.cos(i*t));if(c<0&&(c=this.overshootCurve(c)),isNaN(c)||!isFinite(c))throw"Spring config invalid. Position: "+c;this.lastNFrames.push({offset:c,time:t});let d=!1;if(this.lastNFrames.length>be){this.lastNFrames.shift();let f=0;for(let m of this.lastNFrames)f+=m.offset*m.offset;d=f<nt*be}return c<1&&(d=!0),{offset:c,done:d}}velocity(){return Re(this.lastNFrames)}}var P,p,B;class st extends Ye{constructor(t){super(t);N(this,P,void 0);N(this,p,void 0);N(this,B,void 0);a(this,"lastRaf",null);a(this,"hasCommitted",!1);a(this,"hasAborted",!1);a(this,"pointerHistory",[]);a(this,"snapping",!1);a(this,"mode","");a(this,"parallaxTo80",!1);a(this,"spring80FrequencyResponseInput",document.getElementById("spring80FrequencyResponse")??r());a(this,"spring80FrequencyResponseDisplay",document.getElementById("spring80FrequencyResponseDisplay")??r());a(this,"spring80DampingRatioInput",document.getElementById("spring80DampingRatio")??r());a(this,"spring80DampingRatioDisplay",document.getElementById("spring80DampingRatioDisplay")??r());a(this,"preserveMinOscillationInput",document.getElementById("preserveMinOscillation")??r());a(this,"preserveMinOscillationDisplay",document.getElementById("preserveMinOscillationDisplay")??r());a(this,"hookAtInput",document.getElementById("hookAt")??r());a(this,"hookAtDisplay",document.getElementById("hookAtDisplay")??r());a(this,"spring80FrequencyResponse",parseFloat(this.spring80FrequencyResponseInput.value));a(this,"spring80DampingRatio",parseFloat(this.spring80DampingRatioInput.value));a(this,"preserveMinOscillation",parseFloat(this.preserveMinOscillationInput.value));a(this,"hookAtPercent",parseFloat(this.hookAtInput.value));a(this,"hooked",!1);a(this,"pointerDownX",0);a(this,"dontBounceBackpage",!1);a(this,"wobbleInput",document.getElementById("settingWobble")??r());a(this,"wobble",!!this.wobbleInput.checked);a(this,"postpone",!0);a(this,"postponed",0);this.animationStartOffset=0,this.spring80FrequencyResponseInput.addEventListener("input",()=>this.updateDisplays()),this.spring80DampingRatioInput.addEventListener("input",()=>this.updateDisplays()),this.preserveMinOscillationInput.addEventListener("input",()=>this.updateDisplays()),this.hookAtInput.addEventListener("input",()=>this.updateDisplays()),this.wobbleInput.addEventListener("input",()=>this.updateDisplays()),V(this,P,new ee({frequencyResponse:200,dampingRatio:.95,name:"100%"})),V(this,p,new ee({frequencyResponse:this.spring80FrequencyResponse,dampingRatio:this.spring80DampingRatio,name:"80%"})),u(this,p).preserveMinOscillation=parseFloat(this.preserveMinOscillationInput.value),V(this,B,new ee({frequencyResponse:200,dampingRatio:.9,name:"0%"}))}updateDisplays(){this.spring80FrequencyResponseDisplay.innerHTML=this.spring80FrequencyResponseInput.value,this.spring80DampingRatioDisplay.innerHTML=this.spring80DampingRatioInput.value,this.preserveMinOscillationDisplay.innerHTML=this.preserveMinOscillationInput.value,this.hookAtDisplay.innerHTML=this.hookAtInput.value,this.wobble=!!this.wobbleInput.checked,u(this,p).preserveMinOscillation=parseFloat(this.preserveMinOscillationInput.value)}advance(t){t=t,!this.hasCommitted&&this.committed(t)&&(this.postpone&&(u(this,p).velocity()>0?this.postponed||(this.postponed=t):this.postponed=0),this.postponed||(this.restartAnimating(this.lastRaf||t),this.hasCommitted=!0,this.hooked?u(this,P).initialVelocity=u(this,p).velocity():(this.hooked=!0,u(this,P).initialVelocity=u(this,p).initialVelocity),isNaN(u(this,P).initialVelocity)&&(u(this,P).initialVelocity=-2)));let s=t-this.animationStartTime;this.postponed&&(s+=t-this.postponed);let i=null;if(!this.hooked)this.offset=this.animationStartOffset-s*u(this,p).initialVelocity;else if(this.hasAborted)i=u(this,B).position(this.animationStartOffset,s),this.offset=Math.max(i.offset,0);else if(this.hasCommitted)i=u(this,P).position(this.maxOffset-this.animationStartOffset,s),this.offset=this.maxOffset-i.offset;else{let c=this.targetStopPercent;i=u(this,p).position(this.maxOffset*c-this.animationStartOffset,s),this.offset=this.maxOffset*c-i.offset}!this.hooked&&this.offset>this.maxOffset*this.hookAtPercent/100&&(this.restartAnimating(this.lastRaf||t),this.hooked=!0,this.animationStartOffset=this.offset);let o=i?i.done:!1;this.wobble&&!this.hasCommitted&&(this.offset+=this.maxOffset*.02*Math.sin(2*Math.PI*s/1e3));let l=this.offset;return this.dontBounceBackpage&&(i=u(this,B).position(this.maxOffset-this.animationStartOffset,t-this.loadStart),l=this.maxOffset-Math.max(i.offset,0)),this.lastRaf=t,{done:o&&(this.hasCommitted||this.hasAborted),fgOffset:this.offset,bgOffset:this.fgToBgOffset(l),hasCommitted:this.hasCommitted}}pointerDown(t){this.pointerDownX=t}pointerMove(t,s){return this.offset=this.fingerDragCurve(t-this.pointerDownX),this.pointerHistory.push({offset:this.offset,time:s}),this.pointerHistory.length>10&&this.pointerHistory.shift(),this.offset<0&&(this.offset=0),{done:!1,fgOffset:this.offset,bgOffset:this.fgToBgOffset(this.offset),hasCommitted:!1}}fgToBgOffset(t){let s=0;return this.parallax?this.parallaxTo80?s=.25*(t-this.targetStopPercent*this.maxOffset):s=.25*(t-this.maxOffset):s=0,Math.min(0,s)}setDefaultVelocity(){this.offset=this.maxOffset/4,u(this,p).initialVelocity=this.boostVelocity?-1:-.5}setSnapping(t){return this.snapping=t,t}setMode(t){this.mode=t}setParallaxTo80(t){this.parallaxTo80=t}pointerUp(){let t;return!this.snapping&&this.mode=="snapto"?t=0:(t=Re(this.pointerHistory),this.boostVelocity&&(t=Math.max(t,1)),t=Math.min(t,2.5),t=Math.max(t,.3)),u(this,B).initialVelocity=-t,(this.offset+t*100)/this.maxOffset<.3||t<-.1?(this.hasAborted=!0,u(this,B).initialVelocity=-t,"abort"):(u(this,p).initialVelocity=-t,"success")}}P=new WeakMap,p=new WeakMap,B=new WeakMap;let G=!1,X=!1,L=!1,ie=!1,I=!1,F=!1,me=!1,w=[{main:"resources/srp-couches.png"},{main:"resources/pants-hemming-srp.png",precommit:"resources/pants-srp.png"},{main:"resources/srp-cats.png"},{main:"resources/banana-pie-srp.png"},{main:"resources/goo.gl-stock-a.png",precommit:"resources/goo.gl-stock-b.png"},{main:"resources/news-frontpage.png"},{main:"resources/news-article.png"}],v=0;const De=document.body??r(),Q=document.getElementById("globalProgress")??r(),Me=document.getElementById("attributedProgress")??r(),C=document.getElementById("networkDelayInput")??r(),it=document.getElementById("networkDelayDisplay")??r(),ot=document.getElementById("zoomDisplay")??r(),at=document.getElementById("buttonTest")??r(),rt=document.getElementById("buttonSettings")??r(),xe=document.getElementById("settingsPanel")??r(),Fe=document.getElementById("screenshots")??r(),lt=document.getElementById("targetStopDisplay")??r(),q=document.getElementById("dragCurve")??r(),te=document.getElementById("chevron")??r(),E=document.getElementById("chevronContainer")??r(),ct=document.getElementById("settingChevron")??r(),fe=document.getElementById("preset")??r();var Pe;const Z=((Pe=document.getElementById("frontimg"))==null?void 0:Pe.querySelector("img"))??r();var we;const oe=((we=document.getElementById("midimg"))==null?void 0:we.querySelector("img"))??r();var Be;const K=((Be=document.getElementById("midimgprecommit"))==null?void 0:Be.querySelector("img"))??r(),ne=document.getElementById("frontimg")??r(),se=document.getElementById("midimg")??r(),ae=document.getElementById("settingZoom")??r(),qe=document.getElementById("settingProgressAttribution")??r(),ut=document.getElementById("settingUnloadHandler")??r(),Ae=document.getElementById("settingBoostVelocity")??r(),de=document.getElementById("settingBidirectionalBack")??r(),Le=document.getElementById("settingParallax")??r(),J=document.getElementById("settingTargetStop")??r(),mt=document.getElementById("settingFadeForeground")??r(),ft=document.getElementById("settingWobble")??r(),dt=document.getElementById("settingScrimOnBottom")??r();let D=Me,re=D.querySelector(".bar"),z=Q.querySelector(".bar"),U=0,le=0,A=0,pt=["P25","P50","P75","P90","P95","P99"],ht=[30,100,330,660,1e3,2360];function Ce(){return Le.checked?.25:0}function gt(e){let n=0;for(;e>ht[n];)n++;return n==0?"<P25":n==6?">P99":">"+pt[n-1]}let M=1,Y=1,O=!1;bt();let x={};vt();function Te(e){return I?document.documentElement.getBoundingClientRect().width-e:e}function yt(e){return Le.checked?e:{done:e.done,fgOffset:e.fgOffset,bgOffset:0,hasCommitted:e.hasCommitted}}function Ne(e){if(e=yt(e),!I)return e;let n,t;if(de.checked)n=-e.fgOffset,t=Math.abs(e.bgOffset);else{const s=document.documentElement.getBoundingClientRect().width;n=Math.abs(e.fgOffset-s),t=-(e.bgOffset+Ce()*s)}return{done:e.done,fgOffset:n,bgOffset:t,hasCommitted:e.hasCommitted}}function vt(){let e=document.querySelectorAll("input");for(const t of e)t&&(t.type=="checkbox"?x[t.id]=t.checked.toString():x[t.id]=t.value);let n=document.querySelectorAll("select");for(const t of n)x[t.id]=t.value}function bt(){console.log("PARSE");var e=window.location.href,n=new URL(e);for(const[t,s]of n.searchParams){console.log(t,s),t=="runTest"&&Ge();let i=document.getElementById(t);if(i&&i.nodeName=="INPUT"){let o=i;o.type=="checkbox"?o.checked=s=="true":o.value=s}}}function Et(){const e=new URL(window.location.toString());let n=document.querySelectorAll("input");for(const s of n)s&&(s.type=="checkbox"?x[s.id]!=s.checked.toString()?e.searchParams.set(s.id,s.checked.toString()):e.searchParams.delete(s.id):x[s.id]!=s.value?e.searchParams.set(s.id,s.value):e.searchParams.delete(s.id));let t=document.querySelectorAll("select");for(const s of t)e.searchParams.set(s.id,s.value);console.log("UPDATE");for(const[s,i]of e.searchParams)console.log(s,i);window.history.replaceState({},"",e)}let It={quickBounce:{spring80FrequencyResponse:"400",preserveMinOscillation:"0.02"},slowBounce:{spring80FrequencyResponse:"800",spring80DampingRatio:"1.2",preserveMinOscillation:"0.04"},steady:{spring80FrequencyResponse:"680",spring80DampingRatio:"0.92",preserveMinOscillation:"0.04"},drift:{settingBoostVelocity:"false",spring80FrequencyResponse:"800",preserveMinOscillation:"0.04"},none:{}};function Ee(e){for(const n in e){let t=document.getElementById(n);if(t&&t.nodeName=="INPUT"){let s=e[n],i=t;i.type=="checkbox"?i.checked=s=="true":i.value=s}}}function St(e){Ee(x),Ee(It[e])}function Ot(){let e=parseInt(C.value);return Math.min(Math.max(e+500,e*2),e+1e3)}function Pt(e){var t;if(((t=e.target)==null?void 0:t.classList[0])!="screenshot"||G&&!F)return;L=!0,ge(),X=!0,h=j();const n=document.documentElement.getBoundingClientRect().width;e.clientX>n/2?I=!0:I=!1,h.pointerDown(Te(e.clientX))}function ce(){return!I||de.checked?!1:!!dt.checked}function Ve(e){return ce()?e*.8:.3+(1-e)*.5}let H=!1,b=null,$=0,Ie=50;function pe(){!I||de.checked||(ne.classList.toggle("top_screenshot"),ne.classList.toggle("bottom_screenshot"),ce()&&ne.classList.toggle("show_scrim"),se.classList.toggle("top_screenshot"),se.classList.toggle("bottom_screenshot"),ce()&&se.classList.toggle("show_scrim"))}function W(e){if(!X)return;b||(b=e,pe());let n=e.x-b.x;b=e,$=Math.min(Math.max($+n,0),Ie),He($/Ie);let t=h.pointerMove(Te(e.clientX),e.timeStamp),s=Ne(t),i=t.fgOffset/document.documentElement.getBoundingClientRect().width;document.documentElement.style.setProperty("--fg-offset",`${s.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${s.bgOffset}px`),document.documentElement.style.setProperty("--scrim",`${Ve(i)}`),ze(i),_e(i),wt(i)}let _=!1;function He(e){ct.checked||(e=0),E.style.display="block",e>.7?(E.style.left="25px",E.style.borderRadius="50%",E.style.width=getComputedStyle(E).height,te.style.opacity="1",_||(navigator.vibrate(1),_=!0)):e>.1?(_=!1,E.style.left="1px",E.style.borderRadius="15px",E.style.width=`${E.getBoundingClientRect().height*(e-.1)/.6}px`,te.style.opacity=`${Math.min(Math.max((e-.5)/.2,0),1)}`):(_=!1,E.style.display="none",te.style.opacity="0")}function _e(e){let n=1-(1-Y)*e;document.documentElement.style.setProperty("--fg-scale",`${n}`)}function wt(e){if(e>.5){if(!H){let n=document.documentElement.animate([{"--bg-scale":Y}],{duration:100,fill:"forwards"});n.finished.then(()=>{n.commitStyles(),n.cancel()}),H=!0}}else if(H){let n=document.documentElement.animate([{"--bg-scale":M}],{duration:100,fill:"forwards"});n.finished.then(()=>{n.commitStyles(),n.cancel()}),H=!1}}let R=null;function ue(e){if(O){R=e;return}if(R=null,b=null,He(0),$=0,!X)return;if(X=!1,ie=!1,h.pointerUp()=="abort")kt(),L=!0;else if(ut.checked){let t=document.documentElement.style.getPropertyValue("--fg-offset"),s=document.documentElement.style.getPropertyValue("--bg-offset"),i=document.documentElement.style.getPropertyValue("--scrim"),o=0,l=-Ce()*document.documentElement.getBoundingClientRect().width,c=.8;I&&(o=document.documentElement.getBoundingClientRect().width,l=0,c=0),console.log("endoffset is "+o);let d=document.documentElement.animate([{"--scrim":c,"--fg-scale":1,"--fg-offset":o+"px","--bg-offset":l+"px"}],{duration:300,fill:"forwards"});d.finished.then(()=>{if(d.commitStyles(),d.cancel(),window.confirm("are you sure you want to leave this page?  It's very nice.")){let f=document.documentElement.animate([{"--scrim":i,"--fg-scale":1,"--fg-offset":t+"px","--bg-offset":s+"px"}],{duration:300,fill:"forwards"});f.finished.then(()=>{f.commitStyles(),f.cancel(),Oe().then(Se)})}else pe(),I&&(document.documentElement.style.setProperty("--fg-offset","0px"),document.documentElement.style.setProperty("--bg-offset","0px"),I=!1)});return}Oe().then(Se)}function Bt(){let e=document.documentElement.animate([{"--fg-scale":Y,"--bg-scale":1}],{duration:100,fill:"forwards"});e.finished.then(()=>{e.commitStyles(),e.cancel()});const n=K.animate({opacity:0},{duration:100,fill:"forwards"});n.finished.then(()=>{n.commitStyles(),n.cancel()})}function kt(){let e=document.documentElement.animate([{"--fg-scale":1,"--bg-scale":M}],{duration:100,fill:"forwards"});e.finished.then(()=>{e.commitStyles(),e.cancel()})}function Se(){me=!0,document.documentElement.animate([{"--scrim":0}],{duration:100}).finished.then(We),F=!L,F?Ue():he()}function Ue(){if(!F)return;let e=performance.now();if(e>=le){he();return}A==0&&(A=e);let n=le-A;Q.style.display="block",z.max=n,z.value=Math.max(e-A,.1*n),requestAnimationFrame(Ue)}let h=j();ge();function $e(e,n){const t=h.advance(e),s=Ne(t);document.documentElement.style.setProperty("--fg-offset",`${s.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${s.bgOffset}px`);let i=t.fgOffset/document.documentElement.getBoundingClientRect().width;const o=Ve(i);ze(i);let l=o;document.documentElement.style.setProperty("--scrim",`${l}`),_e(i),e-U>350&&(D.style.display="block"),t.hasCommitted&&!ie&&(Bt(),ie=!0),t.done?n():requestAnimationFrame(c=>{$e(c,n)})}function Oe(){return G=!0,U=performance.now(),le=U+Ot(),A=0,h.startAnimating(U),new Promise(e=>{$e(performance.now(),e)})}function We(){me=!1,document.documentElement.style.setProperty("--fg-offset","0px"),document.documentElement.style.setProperty("--vertical-offset","0px"),document.documentElement.style.setProperty("--scrim","0.0"),document.documentElement.style.setProperty("--bg-scale",M.toString()),document.documentElement.style.setProperty("--fg-scale","1.0"),K.style.opacity="1",pe(),I=!1,L||Dt(),L=!1,F||(G=!1)}function he(){F=!1,D.style.display="none",re.removeAttribute("value"),re.removeAttribute("max"),Q.style.display="none",z.removeAttribute("value"),z.removeAttribute("max"),me||(G=!1)}function ge(){he(),We()}function j(){const e=document.documentElement.getBoundingClientRect().width,n=parseFloat(J.value);let t=i=>i;if(q.value=="linear80")t=i=>i*n;else if(q.value=="linearelastic")t=i=>{const o=i/e,l=.7;return o<l?i:(l+(o-l)/20)*e};else if(q.value=="snapto"){let i=0,o=0,l=-999;O=h.setSnapping(!1);let c=-1,d=4,f=1,m=[];t=g=>{l==-999&&(l=g);let k=g-l;if(l=g,O&&(i<c*e?(i+=d,i>=c*e&&(i=c*e,O=h.setSnapping(!1),o=0,R!==null&&ue(R))):i>c*e&&(i-=d,i<=c*e&&(i=c*e,O=h.setSnapping(!1),o=0,R!==null&&ue(R)))),O)return requestAnimationFrame(()=>{O&&b!==null&&W(b)}),i;m.push(k),m.length>5&&m.shift();let S=0;for(let T of m)T*f<0&&S++;return S==m.length&&(f=-f,o=0),o+=k,c<n&&o/e>.1?(c=n,O=h.setSnapping(!0),requestAnimationFrame(()=>{b!==null&&W(b)})):c>0&&o/e<-.05?(c=0,O=h.setSnapping(!0),requestAnimationFrame(()=>{b!==null&&W(b)})):i+=.1*k,i}}let s=new st({networkDelay:parseInt(C.value),targetOffset:e,parallax:!0,fingerDragCurve:t,boostVelocity:!!Ae.checked,targetStopPercent:n});return s.setMode(q.value),s.setParallaxTo80(!1),s}function Xe(){let e=document.documentElement.getBoundingClientRect().width,n=j();n.setDefaultVelocity(),n.startAnimating(0);var t=document.getElementById("plot")??r(),s=t.getContext("2d");if(!s)return;s.save(),s.clearRect(0,0,t.width,t.height),s.scale(t.width/2e3,t.height/e),s.lineWidth=3,s.strokeStyle="black",s.beginPath(),s.moveTo(0,0);for(var i=0;i<2e3;i++)s.lineTo(i,n.advance(i).fgOffset);s.stroke(),s.strokeStyle="red";let o=e*parseFloat(J.value);s.beginPath(),s.moveTo(0,o),s.lineTo(2e3,o),s.stroke(),s.strokeStyle="green";let l=parseInt(C.value);s.beginPath(),s.moveTo(l,0),s.lineTo(l,e),s.stroke(),s.restore()}function Ze(){let e=parseInt(C.value);it.innerHTML=e+"ms "+gt(e),Xe()}function y(e=!0){Et(),Ze(),M=parseInt(ae.value)/100,Y=M+(1-M)/3,ot.innerHTML=ae.value.toString(),lt.innerHTML=`${Math.round(100*parseFloat(J.value))}`,h.updateDisplays(),Xe(),h=j(),ge(),e&&(fe.value="none")}function Rt(){let e=fe.value;e!="custom"&&St(e),y(!1)}function ze(e){mt.checked&&(Z.style.filter=`grayscale(${e})`)}function Dt(){Z.style.filter="",Z.src=oe.src,oe.src=w[v].main,K.src=w[v].precommit??"",v=(v+1)%w.length}function Ge(){xe.style.display="none",Fe.style.display="block",document.documentElement.style.setProperty("--main-background-color","#202020"),De.classList.add("test")}function Mt(){xe.style.display="flex",Fe.style.display="none",document.documentElement.style.setProperty("--main-background-color","white"),De.classList.remove("test")}function xt(){qe.checked?D=Me:D=Q,re=D.querySelector(".bar")}function Ft(){let e=document.querySelectorAll("input");for(const o of e)o.id!="networkDelayInput"&&o.addEventListener("input",()=>y());C.addEventListener("input",Ze),ae.addEventListener("input",()=>y()),J.addEventListener("input",()=>y()),Ae.addEventListener("input",()=>y()),q.addEventListener("change",()=>y()),fe.addEventListener("change",Rt);let n=document.getElementById("spring80FrequencyResponse")??r(),t=document.getElementById("spring80DampingRatio")??r(),s=document.getElementById("preserveMinOscillation")??r(),i=document.getElementById("hookAt")??r();n.addEventListener("input",()=>y()),t.addEventListener("input",()=>y()),s.addEventListener("input",()=>y()),i.addEventListener("input",()=>y()),ft.addEventListener("input",()=>y()),at.addEventListener("click",Ge),rt.addEventListener("click",Mt),Z.src=w[v].main,v=(v+1)%w.length,oe.src=w[v].main,K.src=w[v].precommit??"",v=(v+1)%w.length,qe.addEventListener("change",xt),y(),window.addEventListener("pointerdown",Pt),window.addEventListener("pointerup",ue),window.addEventListener("pointermove",W)}onload=Ft;
