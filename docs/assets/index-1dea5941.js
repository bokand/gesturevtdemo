var H=Object.defineProperty;var $=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var a=(e,t,n)=>($(e,typeof t!="symbol"?t+"":t,n),n),x=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var m=(e,t,n)=>(x(e,t,"read from private field"),n?n.call(e):t.get(e)),w=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},v=(e,t,n,i)=>(x(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();class G{constructor(t){a(this,"animationStartTime",0);a(this,"animationStartOffset",0);a(this,"networkDelay");a(this,"maxOffset");a(this,"offset",0);this.networkDelay=t.networkDelay,this.maxOffset=t.targetOffset}startAnimating(t){this.animationStartTime=t,this.animationStartOffset=this.offset}committed(){return performance.now()-this.animationStartTime>=this.networkDelay}}function K(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k={exports:{}};(function(e){(function(){e.exports=t;function t(n,i,s,o){typeof s=="object"&&(o=s,s=!1),typeof o>"u"&&(o={});for(var r=0,f=0,g=0,d=0,l=n.length,c=0;c<l;++c)r+=n[c],f+=i[c],g+=n[c]*i[c],d+=n[c]*n[c];if(o.m=(g-r*f/l)/(d-r*r/l),o.b=f/l-o.m*r/l,s){for(var L=0,p=0;p<l;++p)L+=(i[p]-o.b-o.m*n[p])*(i[p]-o.b-o.m*n[p]);var I=l*d-r*r,b=1/(l-2)*L;o.bErr=Math.sqrt(b/I*d),o.mErr=Math.sqrt(l/I*b)}return function(V){return o.m*V+o.b}}})()})(k);var U=k.exports;const Y=K(U);function N(){throw new Error("missing element")}function Z(e){let t={m:0};const n=e.map(s=>s.offset),i=e.map(s=>s.time);return Y(i,n,!1,t),t.m,console.log(e),console.log(t),t.m}const A=10,z=100;class R{constructor(t){a(this,"mass",1);a(this,"initialVelocity",0);a(this,"dampingRatio");a(this,"undampedNaturalFrequency");a(this,"dampedNaturalFrequency");a(this,"lastNFrames");a(this,"name");const n=(2*Math.PI/t.frequencyResponse)**2*this.mass;this.undampedNaturalFrequency=Math.sqrt(n/this.mass),this.dampedNaturalFrequency=this.undampedNaturalFrequency*Math.sqrt(Math.abs(1-t.dampingRatio**2)),this.dampingRatio=t.dampingRatio,this.lastNFrames=[],this.name=t.name}position(t,n){console.log("Start position: "+t),console.log("Time: "+n);const i=this.undampedNaturalFrequency*this.dampingRatio,s=this.dampedNaturalFrequency,o=(this.initialVelocity+i*t)/s,r=t,f=Math.exp(-i*n)*(o*Math.sin(s*n)+r*Math.cos(s*n));if(isNaN(f)||!isFinite(f))throw"Spring config invalid. Position: "+f;this.lastNFrames.push({offset:f,time:n});let g=!1;if(this.lastNFrames.length>A){this.lastNFrames.shift();let d=0;for(let l of this.lastNFrames)d+=l.offset*l.offset;g=d<z*A}return{offset:f,done:g}}velocity(){return Z(this.lastNFrames)}}var h,u,S;class J extends G{constructor(n){super(n);w(this,h,void 0);w(this,u,void 0);w(this,S,void 0);a(this,"lastRaf",null);a(this,"hasCommitted",!1);this.animationStartOffset=this.animationStartTime,v(this,h,new R({frequencyResponse:1e3,dampingRatio:.95,name:"100%"})),v(this,u,new R({frequencyResponse:1200,dampingRatio:.7,name:"80%"})),v(this,S,new R({frequencyResponse:1e3,dampingRatio:.95,name:"0%"}))}updateDisplays(){}advance(n){n=n,!this.hasCommitted&&this.committed()&&(this.startAnimating(this.lastRaf||n),this.hasCommitted=!0,m(this,h).initialVelocity=m(this,u).velocity(),console.log("VELOCITY HANDOFF: "+m(this,u).velocity()));const i=n-this.animationStartTime;let s=null;return this.hasCommitted?(console.log(m(this,h)),s=m(this,h).position(this.maxOffset-this.animationStartOffset,i),this.offset=this.maxOffset-s.offset):(s=m(this,u).position(this.maxOffset*.8-this.animationStartOffset,i),console.log(m(this,u)),this.offset=this.maxOffset*.8-s.offset),console.log("Offset "+this.offset),this.lastRaf=n,{done:s.done&&this.hasCommitted,offset:this.offset}}pointerMove(n){return this.offset+=n,this.offset<0&&(this.offset=0),this.offset}}h=new WeakMap,u=new WeakMap,S=new WeakMap;let Q=J,O,T,P=!1,E=!1;const _=document.getElementById("scrim")??N(),F=document.getElementById("networkDelayInput")??N(),B=Array.from(document.querySelectorAll('input[name="mode"]')).map(e=>e),W=document.getElementById("networkDelayDisplay")??N();function j(e){var t;((t=e.target)==null?void 0:t.id)!=""||P||(E=!0,y=M(),T=document.startViewTransition(),T.ready.then(()=>{O=document.documentElement.animate({},{duration:100,pseudoElement:"::view-transition-new(root)"}),O.pause(),_.style.display="block"}))}function X(e){if(!E)return;let t=y.pointerMove(e.movementX);document.documentElement.style.setProperty("--offset",`${t}px`);let i=.3+(1-t/document.documentElement.getBoundingClientRect().width)*.5;document.documentElement.style.setProperty("--scrim",`${i}`)}function tt(e){E&&(E=!1,et().then(()=>{document.documentElement.animate([{"--scrim":0}],{duration:100}).finished.then(D)}))}let y=M();D();function C(e,t){const n=y.advance(e);console.log(n),document.documentElement.style.setProperty("--offset",`${n.offset}px`),n.done?t():requestAnimationFrame(i=>{C(i,t)})}function et(){return P=!0,y.startAnimating(performance.now()),new Promise(e=>{C(performance.now(),e)})}function D(){P=!1,document.documentElement.style.setProperty("--offset","0px"),document.documentElement.style.setProperty("--vertical-offset","0px"),document.documentElement.style.setProperty("--scrim","0.0"),O&&O.play(),_.style.display="none"}function M(){for(const e of B)e.checked&&parseInt(e.value);return new Q({dragStartTime:performance.now(),networkDelay:parseFloat(F.value),targetOffset:document.documentElement.getBoundingClientRect().width})}function q(){W.innerHTML=F.value,y.updateDisplays(),y=M(),D()}function nt(){F.addEventListener("input",q);for(const e of B)e.addEventListener("click",q);q(),window.addEventListener("pointerdown",j),window.addEventListener("pointerup",tt),window.addEventListener("pointermove",X)}onload=nt;
