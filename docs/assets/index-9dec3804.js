var W=Object.defineProperty;var Y=(n,t,e)=>t in n?W(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var a=(n,t,e)=>(Y(n,typeof t!="symbol"?t+"":t,e),e),T=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var m=(n,t,e)=>(T(n,t,"read from private field"),e?e.call(n):t.get(n)),D=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},O=(n,t,e,o)=>(T(n,t,"write to private field"),o?o.call(n,e):t.set(n,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();class j{constructor(t){a(this,"animationStartTime",0);a(this,"animationStartOffset",0);a(this,"networkDelay");a(this,"maxOffset");a(this,"offset",0);a(this,"parallax");a(this,"limitFingerDrag");this.networkDelay=t.networkDelay,this.maxOffset=t.targetOffset,this.parallax=t.parallax,this.limitFingerDrag=t.limitFingerDrag}startAnimating(t){this.animationStartTime=t,this.animationStartOffset=this.offset}pointerUp(t){return"success"}committed(){return performance.now()-this.animationStartTime>=this.networkDelay}}function X(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V={exports:{}};(function(n){(function(){n.exports=t;function t(e,o,s,i){typeof s=="object"&&(i=s,s=!1),typeof i>"u"&&(i={});for(var r=0,c=0,R=0,p=0,l=e.length,u=0;u<l;++u)r+=e[u],c+=o[u],R+=e[u]*o[u],p+=e[u]*e[u];if(i.m=(R-r*c/l)/(p-r*r/l),i.b=c/l-i.m*r/l,s){for(var B=0,g=0;g<l;++g)B+=(o[g]-i.b-i.m*e[g])*(o[g]-i.b-i.m*e[g]);var A=l*p-r*r,k=1/(l-2)*B;i.bErr=Math.sqrt(k/A*p),i.mErr=Math.sqrt(l/A*k)}return function(Q){return i.m*Q+i.b}}})()})(V);var tt=V.exports;const et=X(tt);function f(){throw new Error("missing element")}function $(n){let t={m:0};const e=n.map(s=>s.offset),o=n.map(s=>s.time);return et(o,e,!1,t),t.m,t.m}const H=10,nt=10;class P{constructor(t){a(this,"mass",1);a(this,"initialVelocity",0);a(this,"dampingRatio");a(this,"undampedNaturalFrequency");a(this,"dampedNaturalFrequency");a(this,"lastNFrames");a(this,"name");const e=(2*Math.PI/t.frequencyResponse)**2*this.mass;this.undampedNaturalFrequency=Math.sqrt(e/this.mass),this.dampedNaturalFrequency=this.undampedNaturalFrequency*Math.sqrt(Math.abs(1-t.dampingRatio**2)),this.dampingRatio=t.dampingRatio,this.lastNFrames=[],this.name=t.name}position(t,e){const o=this.undampedNaturalFrequency*this.dampingRatio,s=this.dampedNaturalFrequency,i=(this.initialVelocity+o*t)/s,r=t,c=Math.exp(-o*e)*(i*Math.sin(s*e)+r*Math.cos(s*e));if(isNaN(c)||!isFinite(c))throw"Spring config invalid. Position: "+c;this.lastNFrames.push({offset:c,time:e});let R=!1;if(this.lastNFrames.length>H){this.lastNFrames.shift();let p=0;for(let l of this.lastNFrames)p+=l.offset*l.offset;R=p<nt*H}return{offset:c,done:R}}velocity(){return $(this.lastNFrames)}}var y,d,E;class st extends j{constructor(e){super(e);D(this,y,void 0);D(this,d,void 0);D(this,E,void 0);a(this,"lastRaf",null);a(this,"hasCommitted",!1);a(this,"hasAborted",!1);a(this,"pointerHistory",[]);a(this,"spring80FrequencyResponseInput",document.getElementById("spring80FrequencyResponse")??f());a(this,"spring80FrequencyResponseDisplay",document.getElementById("spring80FrequencyResponseDisplay")??f());a(this,"spring80DampingRatioInput",document.getElementById("spring80DampingRatio")??f());a(this,"spring80DampingRatioDisplay",document.getElementById("spring80DampingRatioDisplay")??f());a(this,"spring80FrequencyResponse",parseFloat(this.spring80FrequencyResponseInput.value));a(this,"spring80DampingRatio",parseFloat(this.spring80DampingRatioInput.value));this.animationStartOffset=0,this.spring80FrequencyResponseInput.addEventListener("input",()=>this.updateDisplays()),this.spring80DampingRatioInput.addEventListener("input",()=>this.updateDisplays()),O(this,y,new P({frequencyResponse:200,dampingRatio:.95,name:"100%"})),O(this,d,new P({frequencyResponse:this.spring80FrequencyResponse,dampingRatio:this.spring80DampingRatio,name:"80%"})),console.log(m(this,d)),O(this,E,new P({frequencyResponse:200,dampingRatio:.9,name:"0%"}))}updateDisplays(){console.log(this.spring80FrequencyResponseInput.value),this.spring80FrequencyResponseDisplay.innerHTML=this.spring80FrequencyResponseInput.value,this.spring80DampingRatioDisplay.innerHTML=this.spring80DampingRatioInput.value}advance(e){e=e,!this.hasCommitted&&this.committed()&&(this.startAnimating(this.lastRaf||e),this.hasCommitted=!0,m(this,y).initialVelocity=m(this,d).velocity());const o=e-this.animationStartTime;let s=null;return this.hasAborted?(s=m(this,E).position(this.animationStartOffset,o),this.offset=Math.max(s.offset,0)):this.hasCommitted?(s=m(this,y).position(this.maxOffset-this.animationStartOffset,o),this.offset=this.maxOffset-s.offset):(s=m(this,d).position(this.maxOffset*.8-this.animationStartOffset,o),this.offset=this.maxOffset*.8-s.offset),this.lastRaf=e,{done:s.done&&this.hasCommitted,fgOffset:this.offset,bgOffset:this.fgToBgOffset(this.offset)}}pointerMove(e){return this.offset=this.fingerDragAdd(this.offset,e.movementX),this.pointerHistory.push({offset:this.offset,time:e.timeStamp}),this.pointerHistory.length>10&&this.pointerHistory.shift(),this.offset<0&&(this.offset=0),{done:!1,fgOffset:this.offset,bgOffset:this.fgToBgOffset(this.offset)}}fingerDragAdd(e,o){return this.limitFingerDrag?e+.8*o:e+o}fgToBgOffset(e){return this.parallax?.25*(e-this.maxOffset):0}pointerUp(e){const o=-Math.max(-$(this.pointerHistory),-1.2);return console.log("offset",this.offset),console.log("velocity",o),(this.offset+o*100)/this.maxOffset<.3?(this.hasAborted=!0,m(this,E).initialVelocity=-o,"abort"):(m(this,d).initialVelocity=-o,"success")}}y=new WeakMap,d=new WeakMap,E=new WeakMap;let F,_,I=!1,b=!1,q=!1;const U=document.getElementById("scrim")??f(),Z=document.getElementById("progress")??f(),x=document.getElementById("networkDelayInput")??f(),it=document.getElementById("networkDelayDisplay")??f(),ot=document.getElementById("settingParallax")??f(),at=document.getElementById("settingLimitFingerDrag")??f(),M=document.getElementById("settingZoom")??f();let G="lightblue",S=0,w=100;function rt(){w=w+1;const n=(w*185852+1)%34359738337/34359738337;return"#"+Math.floor(n*16777215).toString(16)}function lt(n){var t;((t=n.target)==null?void 0:t.id)!=""||I||(b=!0,h=L(),_=document.startViewTransition(),_.ready.then(()=>{G=document.documentElement.style.getPropertyValue("--main-background-color"),document.documentElement.style.setProperty("--main-background-color",rt()),F=document.documentElement.animate({},{duration:0,pseudoElement:"::view-transition-new(root)"}),F.pause(),U.style.display="block"}))}function K(n){return .3+(1-n/document.documentElement.getBoundingClientRect().width)*.5}let v=!1;function ft(n){if(!b)return;let t=h.pointerMove(n);document.documentElement.style.setProperty("--fg-offset",`${t.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${t.bgOffset}px`),document.documentElement.style.setProperty("--scrim",`${K(t.fgOffset)}`),z(t.fgOffset)}function z(n){if(M.checked){let t=n/document.documentElement.getBoundingClientRect().width,e=1-.1*t;document.documentElement.style.setProperty("--fg-scale",`${e}`),t>.5?v||(document.documentElement.animate([{"--bg-scale":.9}],{duration:100,fill:"forwards"}),v=!0):v&&(document.documentElement.animate([{"--bg-scale":.8}],{duration:100,fill:"forwards"}),v=!1)}}function ct(n){if(!b)return;b=!1;let t=1,e=.9;h.pointerUp(n)=="abort"&&(q=!0,w--,e=1,t=.8),mt().then(()=>{if(M.checked){let i=document.documentElement.animate([{"--fg-scale":e,"--bg-scale":t}],{duration:100,fill:"forwards"});i.finished.then(()=>{i.commitStyles(),i.cancel()})}document.documentElement.animate([{"--scrim":0}],{duration:100}).finished.then(N)})}let h=L();N();function J(n,t){const e=h.advance(n);document.documentElement.style.setProperty("--fg-offset",`${e.fgOffset}px`),document.documentElement.style.setProperty("--bg-offset",`${e.bgOffset}px`),document.documentElement.style.setProperty("--scrim",`${K(e.fgOffset)}`),z(e.fgOffset),n-S>800&&(Z.style.display="block"),e.done?t():requestAnimationFrame(o=>{J(o,t)})}function mt(){return I=!0,S=performance.now(),h.startAnimating(S),new Promise(n=>{J(performance.now(),n)})}function N(){I=!1,document.documentElement.style.setProperty("--fg-offset","0px"),document.documentElement.style.setProperty("--vertical-offset","0px"),document.documentElement.style.setProperty("--scrim","0.0"),document.documentElement.style.setProperty("--bg-scale",M.checked?"0.8":"1.0"),document.documentElement.style.setProperty("--fg-scale","1.0"),q&&(document.documentElement.style.setProperty("--main-background-color",G),q=!1),F&&F.play(),U.style.display="none",Z.style.display="none"}function L(){return new st({networkDelay:parseFloat(x.value),targetOffset:document.documentElement.getBoundingClientRect().width,parallax:!!ot.checked,limitFingerDrag:!!at.checked})}function C(){it.innerHTML=x.value,h.updateDisplays(),h=L(),N()}function ut(){x.addEventListener("input",C),C(),window.addEventListener("pointerdown",lt),window.addEventListener("pointerup",ct),window.addEventListener("pointermove",ft)}onload=ut;
